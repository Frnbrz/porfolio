---
import Light from '../icons/Light.astro'
import Dark from '../icons/Dark.astro'
---

<button
  id='theme-toggle'
  class='dark-mode-button block px-3 py-2'
  aria-label='Dark Mode Toggle'
>
  <span class='dark-mode-icon hidden'>
    <Dark />
  </span>
  <span class='light-mode-icon hidden'>
    <Light />
  </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const themeToggleBtn = document.getElementById('theme-toggle')
    const htmlElement = document.documentElement

    if (!themeToggleBtn) {
      console.error('Theme toggle button not found!')
      return
    }

    themeToggleBtn.addEventListener('click', () => {
      if (htmlElement.classList.contains('dark')) {
        htmlElement.classList.remove('dark')
        localStorage.setItem('theme', 'light')
      } else {
        htmlElement.classList.add('dark')
        localStorage.setItem('theme', 'dark')
      }
    })

    // On page load, set the theme based on localStorage
    if (localStorage.getItem('theme') === 'dark') {
      htmlElement.classList.add('dark')
    } else {
      htmlElement.classList.remove('dark')
      htmlElement.classList.add('light')
    }
  })
</script>
